!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("instantly",[],t):"object"==typeof exports?exports.instantly=t():n.instantly=t()}(this,function(){return function(n){function t(o){if(e[o])return e[o].exports;var r=e[o]={exports:{},id:o,loaded:!1};return n[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){n.exports=e(3)},function(n,t){function e(n){return o(n)&&c.call(n)==r}function o(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}var r="[object Function]",i=Object.prototype,c=i.toString;n.exports=e},function(n,t){function e(n){return!!n&&"object"==typeof n}function o(n){return"string"==typeof n||e(n)&&c.call(n)==r}var r="[object String]",i=Object.prototype,c=i.toString;n.exports=o},function(n,t,e){"use strict";function o(n,t){function e(n,t){if(!i(t))throw new TypeError("Callback is not a function");if(!r(n))throw new TypeError("Event is not a string");g[n]=t}function o(){if(d){b=new d(n),b.addEventListener("open",l),b.addEventListener("error",a);for(var t in g){if(!g.hasOwnProperty(t))return;c(t)}}}function c(n){b.addEventListener(n,function(t){p&&t.origin!==p||(("CLOSE"===t.id||"CLOSE"===t.lastEventId)&&f(),g[n].call(null,t))})}function u(){j||m===v||setTimeout(function(){o(),m++},y)}function l(n){j=!0,m=0,E&&E.call(null,n)}function f(){b.close(),j=!1,x&&x.call(null)}function a(n){f(),u(),w&&w.call(null,n)}function s(){document.hidden?f():o()}if(!n)throw new TypeError("You need to provide a channel we can listen to!");t||(t={});var d;t.injectEventSourceNode?d=t.injectEventSourceNode:"undefined"!=typeof window&&window.EventSource&&(d=window.EventSource);var p=t.origin||null,v=t.retries||5,y=t.timeout||15e3,w=i(t.error)?t.error:null,E=i(t.open)?t.open:null,x=i(t.close)?t.close:null;t.closeConnNotFocus&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",s);var b,j=!1,g={},m=0;return{on:e,listen:o,generateCallback:c,retry:u,close:f,error:a}}var r=e(2),i=e(1);n.exports=o}])});